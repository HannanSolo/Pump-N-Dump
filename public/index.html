<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Pump N Dump!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="styles.css">
    <script type="text/javascript" src="js/Chart.js"></script>
</head>
<body>
        
<!-- Page Container -->
<div id="page-container">
    <!-- Pump Buttons -->
    <div id="pump-container">
        <div id="coins-container">

        </div>
    </div>

    <!-- Dump Button -->
    <div id="dump-container">
        <div id="dump-card" class="coins">
            <p class="button-text">Bitcoin</p>
            <p class="button-text">How much do you want to pump?</p>
            <input id="pump-amount" type="text"><br/>
            <button onclick="pump()">PUMP!</button>
        </div>
    </div>
</div>

<!-- Electron Render -->
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
//allow server&client to talk
const {ipcRenderer} = require('electron');
//ask for api data
ipcRenderer.send('readyForData', '');
//on obtained api data
ipcRenderer.on('apiData', (event, arg) => {
    console.log(arg);
});

//////////////////////////
// Functions
//////////////////////////
function createCoinCard(coinName){
    holder.innerHTML +=
        '<div id='+coinName.toLowerCase()+' class="coins">'
            +'<p class="button-text">'+coinName+'</p>'
            +'<p class="button-text"><canvas width="219" height="219"></canvas></p>'
            +'<div class="slidecontainer">'
                +'<input type="range" min="1" max="100" value="50" class="slider" id="myRange">'
            +'</div>'
        +'</div>';
}
//create coin card chart
function createChart(coinName){
    var ctx = document.querySelector('#'+coinName+' canvas');
    //var ctx = document.getElementById('bbc');
    Chart.defaults.line.spanGaps = true;
    var coinChart = new Chart(ctx, {
        type: 'line',
    data: {
        labels: [0,12,24],
        datasets: [{ 
            data: [86,1000,2999],
            borderColor: "#3e95cd",
            fill: false
        }
        ]
    },
    options: {
        title: {
        display: true,
        text: coinName+' 24H'
        }
    }
});

}

//add coin cards to html
var holder = document.getElementById('coins-container');
var coins = ['bbc','abc', 'www', 'btc', 'aws', 'pop'];//place holder replace for dynamically loaded in
//create coin cards
for(i = 0; i < coins.length; i++){
    createCoinCard(coins[i]);
}
//load graphs after coin cards
for(i = 0; i < coins.length; i++){
    createChart(coins[i]);
}

setTimeout(function(){
    //load graphs after coin cards
for(i = 0; i < coins.length; i++){
    createChart(coins[i]);
}
},3000);

</script>
</body>
</html>
